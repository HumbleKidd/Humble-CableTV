<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Humble CableTv | Pro Edition</title>
    
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

    <style>
        :root { 
            --accent: #00f2ff; 
            --accent-glow: rgba(0, 242, 255, 0.5); 
            --bg: #050508; 
            --panel: rgba(10, 10, 15, 0.98); 
            --red: #ff4757; 
        }
        
        /* Internalized CSS for Zero-Latency Rendering */
        body { 
            margin: 0; background: var(--bg); color: white; 
            font-family: 'Inter', sans-serif; display: flex; 
            flex-direction: column; height: 100vh; overflow: hidden; 
        }

        header { 
            height: 65px; background: #000; display: flex; align-items: center; 
            justify-content: space-between; padding: 0 15px; border-bottom: 1px solid rgba(255,255,255,0.1);
            z-index: 1001;
        }

        .brand { display: flex; align-items: center; gap: 10px; font-weight: 900; color: var(--accent); letter-spacing: 1px; }
        .logo-svg { width: 26px; height: 26px; filter: drop-shadow(0 0 8px var(--accent)); }
        
        .nav-btns { display: flex; gap: 8px; align-items: center; }
        .btn-main { 
            border: none; padding: 10px 15px; border-radius: 8px; font-weight: 800; 
            cursor: pointer; font-size: 0.75rem; transition: 0.3s; display: flex; align-items: center; gap: 8px;
            background: #1a1a1a; color: white; border: 1px solid #333;
        }
        .btn-accent { background: linear-gradient(135deg, #00f2ff 0%, #0066ff 100%); border: none; box-shadow: 0 4px 15px var(--accent-glow); }

        @media (max-width: 650px) {
            .btn-text { display: none; }
            .btn-main { width: 42px; height: 42px; padding: 0; justify-content: center; border-radius: 50%; font-size: 1.1rem; }
            .brand span { display: none; }
        }

        #main { display: flex; flex: 1; position: relative; overflow: hidden; }
        #theater { flex: 1; background: #000; position: relative; display: flex; flex-direction: column; }
        
        #now-playing-hud {
            background: linear-gradient(to bottom, rgba(0,0,0,0.95) 0%, transparent 100%);
            padding: 15px 20px; display: flex; align-items: center; gap: 12px; z-index: 10;
        }
        #hud-logo { height: 24px; width: auto; filter: drop-shadow(0 0 5px var(--accent)); }
        #hud-title { font-size: 0.95rem; font-weight: 900; text-transform: uppercase; color: var(--accent); letter-spacing: 1px; }

        #player-container { position: relative; flex: 1; background: #000; display: flex; align-items: center; justify-content: center; }
        video { width: 100%; height: 100%; object-fit: contain; background: #000; }

        #sidebar { 
            width: 320px; background: var(--panel); border-left: 1px solid rgba(255,255,255,0.1);
            display: flex; flex-direction: column; transition: transform 0.3s ease;
        }

        @media (max-width: 1024px) { 
            #sidebar { position: absolute; right: 0; height: 100%; transform: translateX(100%); z-index: 1500; width: 85%; } 
            body.menu-open #sidebar { transform: translateX(0); }
        }
        
        #channel-list { flex: 1; overflow-y: auto; padding: 15px; }
        .ch-card { 
            display: flex; align-items: center; padding: 12px; margin-bottom: 8px; 
            border-radius: 10px; background: rgba(255,255,255,0.02); cursor: pointer; transition: 0.2s;
        }
        .ch-card.active { background: rgba(0,242,255,0.1); border-left: 4px solid var(--accent); }
        .ch-logo { width: 40px; height: 30px; object-fit: contain; margin-right: 12px; border-radius: 3px; }
        .ch-name { font-weight: 600; font-size: 0.85rem; }

        .search-wrap { padding: 15px; border-bottom: 1px solid #222; }
        #search { width: 100%; padding: 12px; background: #111; border: 1px solid #333; color: white; border-radius: 8px; outline: none; box-sizing: border-box; }

        .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 3000; display: none; align-items: center; justify-content: center; padding: 20px; backdrop-filter: blur(10px); }
        .modal-content { background: #0a0a0a; width: 100%; max-width: 350px; padding: 30px; border-radius: 25px; border: 1px solid var(--accent); text-align: center; position: relative; }
        #qr-box { background: white; padding: 10px; border-radius: 10px; display: inline-block; margin: 15px 0; }
    </style>
</head>
<body id="app">

<header>
    <div class="brand">
        <svg class="logo-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <rect x="2" y="7" width="20" height="15" rx="2" ry="2"></rect>
            <polyline points="17 2 12 7 7 2"></polyline>
            <circle cx="12" cy="14" r="2"></circle>
        </svg>
        <span>HUMBLE CABLETV</span>
    </div>
    <div class="nav-btns">
        <button class="btn-main" onclick="shuffle()">
            <span>ðŸ”€</span><span class="btn-text">SHUFFLE</span>
        </button>
        <button class="btn-main" onclick="openSync()">
            <span>ðŸ“±</span><span class="btn-text">SYNC</span>
        </button>
        <button class="btn-main btn-accent" onclick="toggleMenu()">
            <span>ðŸ“º</span><span class="btn-text">STATIONS</span>
        </button>
    </div>
</header>

<div id="main">
    <div id="theater">
        <div id="now-playing-hud">
            <img id="hud-logo" src="" alt="">
            <span id="hud-title">LIVE STREAM</span>
        </div>
        <div id="player-container">
            <video id="player" controls playsinline></video>
        </div>
    </div>

    <div id="sidebar">
        <div class="search-wrap">
            <input type="text" placeholder="Search channels..." id="search" oninput="filterChannels()">
        </div>
        <div id="channel-list"></div>
    </div>
</div>

<div id="sync-modal" class="modal">
    <div class="modal-content">
        <h3 style="color:var(--accent); margin-top:0;">SHARE & SYNC</h3>
        <div id="qr-box"></div>
        <button class="btn-main btn-accent" style="width:100%; justify-content:center; margin-top:10px;" onclick="triggerNativeShare()">SHARE TO APPS</button>
        <p onclick="closeModals()" style="cursor:pointer; margin-top:20px; font-size:0.8rem; opacity:0.5;">CLOSE</p>
    </div>
</div>

<script>
    // - Your existing M3U data remains intact
    const m3uRaw = `
#EXTM3U
#EXTINF:-1 tvg-id="TVJ.jm" tvg-name="TVJ Jamaica" tvg-logo="https://i.imgur.com/R4PoC3L.png" group-title="general",TVJ
https://vod2live.univtec.com/manifest/a99a1804-dc83-411f-8c1c-b62f08cdfa59.m3u8

#EXTINF:-1 group-title="WABC New York" tvg-logo="https://raw.githubusercontent.com/tv-logo/tv-logos/main/countries/united-states/us-local/abc-7-wabc-us.png" tvg-name="ABC (WABC)",ABC (WABC)
https://fl61.moveonjoy.com/ABC_EAST/index.m3u8

#EXTINF:-1 group-title="Movies" tvg-id="AMC.-.Eastern.Feed.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.dualstack.us-east-1.amazonaws.com/stationLogos/s10021_dark_360w_270h.png" tvg-name="AMC",AMC
https://fl61.moveonjoy.com/AMC_NETWORK/index.m3u8

#EXTINF:-1 group-title="Entertainment" tvg-id="American.Heroes.Channel.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.dualstack.us-east-1.amazonaws.com/stationLogos/s18284_dark_360w_270h.png" tvg-name="American Heroes Channel",American Heroes Channel
https://fl7.moveonjoy.com/American_Heroes_Channel/index.m3u8

#EXTINF:-1 group-title="Documentary" tvg-id="Animal.Planet.US.-.East.us" tvg-logo="https://raw.githubusercontent.com/tv-logo/tv-logos/main/countries/united-states/animal-planet-us.png" tvg-name="Animal Planet",Animal Planet
https://fl61.moveonjoy.com/Animal_Planet/index.m3u8

#EXTINF:-1 group-title="Entertainment" tvg-id="Antenna.TV.us" tvg-logo="https://raw.githubusercontent.com/tv-logo/tv-logos/refs/heads/main/countries/united-states/antenna-us.png" tvg-name="Antenna",Antenna
https://fl7.moveonjoy.com/Antenna/index.m3u8

#EXTINF:-1 group-title="Entertainment" tvg-id="ASPiRE.TV.us" tvg-logo="https://raw.githubusercontent.com/tv-logo/tv-logos/refs/heads/main/countries/united-states/aspire-tv-us.png" tvg-name="Aspire",Aspire
https://fl41.moveonjoy.com/Aspire/index.m3u8

#EXTINF:-1 group-title="Entertainment" tvg-id="BBC.America.-.East.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.dualstack.us-east-1.amazonaws.com/stationLogos/s18332_dark_360w_270h.png" tvg-name="BBC AMERICA",BBC AMERICA
https://fl31.moveonjoy.com/BBC_AMERICA/index.m3u8

#EXTINF:-1 group-title="News" tvg-id="BBC.World.News.North.America.(BBCWN).us" tvg-logo="https://github.com/tv-logo/tv-logos/blob/main/countries/united-kingdom/bbc-news-uk.png?raw=true" tvg-name="BBC WORLD NEWS",BBC WORLD NEWS
https://fl31.moveonjoy.com/BBC_WORLD_NEWS/index.m3u8

#EXTINF:-1 group-title="Entertainment" tvg-id="BET.-.Eastern.Feed.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.dualstack.us-east-1.amazonaws.com/stationLogos/s10051_dark_360w_270h.png" tvg-name="BET",BET
https://fl31.moveonjoy.com/BET_EAST/index.m3u8

#EXTINF:-1 group-title="Entertainment" tvg-id="BET.Gospel.us" tvg-logo="https://github.com/tv-logo/tv-logos/blob/main/countries/united-states/bet-gospel-us.png?raw=true" tvg-name="BET GOSPEL",BET GOSPEL
https://fl1.moveonjoy.com/BET_GOSPEL/index.m3u8

#EXTINF:-1 group-title="News" tvg-id="Bloomberg.TV.USA.us" tvg-logo="https://github.com/tv-logo/tv-logos/blob/main/countries/united-states/bloomberg-television-us.png?raw=true" tvg-name="BLOOMBERG",BLOOMBERG
https://liveprodusphoenixeast.global.ssl.fastly.net/USPhx-HD/Channel-TX-USPhx-AWS-virginia-1/Source-USPhx-16k-1-s6lk2-BP-07-03-0Yn1cQZHOtP_live.m3u8

#EXTINF:-1 group-title="Kids" tvg-id="Boomerang.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.dualstack.us-east-1.amazonaws.com/stationLogos/s21883_dark_360w_270h.png" tvg-name="Boomerang",Boomerang
https://fl7.moveonjoy.com/BOOMERANG/index.m3u8

#EXTINF:-1 group-title="Entertainment" tvg-id="Bounce.TV.us" tvg-logo="https://github.com/tv-logo/tv-logos/blob/main/countries/united-states/bounce-us.png?raw=true" tvg-name="Bounce",Bounce
https://fl7.moveonjoy.com/BOUNCE_TV/index.m3u8

#EXTINF:-1 group-title="Entertainment" tvg-id="Bravo.USA.-.Eastern.Feed.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.dualstack.us-east-1.amazonaws.com/stationLogos/s10057_dark_360w_270h.png" tvg-name="BRAVO",BRAVO
https://fl61.moveonjoy.com/BRAVO/index.m3u8

#EXTINF:-1 group-title="Entertainment" tvg-id="Buzzr.TV.us" tvg-logo="https://raw.githubusercontent.com/tv-logo/tv-logos/refs/heads/main/countries/united-states/buzzr-us.png" tvg-name="Buzzr",Buzzr
https://fl1.moveonjoy.com/Buzzr/index.m3u8

#EXTINF:-1 group-title="News" tvg-id="C-SPAN.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.dualstack.us-east-1.amazonaws.com/stationLogos/s10161_dark_360w_270h.png" tvg-name="C-SPAN",C-SPAN
https://fl7.moveonjoy.com/C-SPAN/index.m3u8

#EXTINF:-1 group-title="Kids" tvg-id="Cartoon.Network.USA.-.Eastern.Feed.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.dualstack.us-east-1.amazonaws.com/stationLogos/s12131_dark_360w_270h.png" tvg-name="CARTOON NETWORK",CARTOON NETWORK
https://fl1.moveonjoy.com/CARTOON_NETWORK/index.m3u8

#EXTINF:-1 group-title="News" tvg-id="WSBK.(TV-38).Boston.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.dualstack.us-east-1.amazonaws.com/stationLogos/s10098_dark_360w_270h.png" tvg-name="CBS",CBS
https://fl1.moveonjoy.com/FL_West_Palm_Beach_CBS/index.m3u8

#EXTINF:-1 group-title="News" tvg-id="CBS New York" tvg-logo="https://raw.githubusercontent.com/tv-logo/tv-logos/refs/heads/main/countries/united-states/cbs-news-us.png" tvg-name="CBS News",CBS News
https://fl1.moveonjoy.com/CBS_News/index.m3u8

#EXTINF:-1 group-title="Movies" tvg-id="Cinemax.-.Eastern.Feed.us" tvg-logo="https://raw.githubusercontent.com/tv-logo/tv-logos/main/countries/united-states/cinemax-us.png" tvg-name="CINEMAX EAST",CINEMAX EAST
https://fl31.moveonjoy.com/CINEMAX_EAST/index.m3u8

#EXTINF:-1 group-title="Movies" tvg-id="Cinemax.-.Eastern.Feed.us" tvg-logo="https://raw.githubusercontent.com/tv-logo/tv-logos/main/countries/united-states/cinemax-us.png" tvg-name="CINEMAX",CINEMAX
https://fl31.moveonjoy.com/CINEMAX/index.m3u8

#EXTINF:-1 group-title="Movies" tvg-id="MoreMax..Eastern.us" tvg-logo="https://github.com/tv-logo/tv-logos/blob/main/countries/united-states/cinemax-moremax-us.png?raw=true" tvg-name="CINEMAX MOREMAX",CINEMAX MOREMAX
https://fl25.moveonjoy.com/CINEMAX_MOREMAX/index.m3u8

#EXTINF:-1 group-title="Movies" tvg-id="Cinemax.-.Pacific.Feed.us" tvg-logo="https://github.com/tv-logo/tv-logos/blob/main/countries/united-states/cinemax-us.png?raw=true" tvg-name="CINEMAX WEST",CINEMAX WEST
https://fl7.moveonjoy.com/CINEMAX_WEST/index.m3u8

#EXTINF:-1 group-title="Entertainment" tvg-id="CLEO.TV.us" tvg-logo="https://github.com/tv-logo/tv-logos/blob/main/countries/united-states/cleo-tv-us.png?raw=true" tvg-name="Cleo TV",Cleo TV
https://fl41.moveonjoy.com/Cleo_TV/index.m3u8

#EXTINF:-1 group-title="Entertainment" tvg-id="CMT.US.-.Eastern.Feed.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.dualstack.us-east-1.amazonaws.com/stationLogos/s10138_dark_360w_270h.png" tvg-name="CMT",CMT
https://fl1.moveonjoy.com/CMT/index.m3u8

#EXTINF:-1 group-title="News" tvg-id="CNBC.USA.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.dualstack.us-east-1.amazonaws.com/stationLogos/s10139_dark_360w_270h.png" tvg-name="CNBC FHD",CNBC FHD
https://fl31.moveonjoy.com/CNBC/index.m3u8

#EXTINF:-1 group-title="News" tvg-id="CNN.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.dualstack.us-east-1.amazonaws.com/stationLogos/s58646_dark_360w_270h.png" tvg-name="CNN",CNN
https://turnerlive.warnermediacdn.com/hls/live/586495/cnngo/cnn_slate/VIDEO_0_3564000.m3u8

#EXTINF:-1 group-title="News" tvg-id="Cable.News.Network.International.(CNNI).us" tvg-logo="https://github.com/tv-logo/tv-logos/blob/main/countries/united-states/cnn-us.png?raw=true" tvg-name="CNN INTERNATIONAL",CNN INTERNATIONAL
https://fl1.moveonjoy.com/CNN_INTERNATIONAL/index.m3u8

#EXTINF:-1 group-title="Entertainment" tvg-id="Comedy.Central.(US).-.Eastern.Feed.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.dualstack.us-east-1.amazonaws.com/stationLogos/s10149_dark_360w_270h.png" tvg-name="COMEDY CENTRAL",COMEDY CENTRAL
https://fl1.moveonjoy.com/Comedy_Central/index.m3u8

#EXTINF:-1 group-title="Entertainment" tvg-id="Comet.TV.us" tvg-logo="https://raw.githubusercontent.com/tv-logo/tv-logos/refs/heads/main/countries/united-states/comet-us.png" tvg-name="COMET",COMET
https://fl1.moveonjoy.com/COMET/index.m3u8

#EXTINF:-1 group-title="Entertainment" tvg-id="The.Cooking.Channel.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.dualstack.us-east-1.amazonaws.com/stationLogos/s30156_dark_360w_270h.png" tvg-name="COOKING",COOKING
https://fl1.moveonjoy.com/COOKING_CHANNEL/index.m3u8

#EXTINF:-1 group-title="Entertainment" tvg-id="Court.TV.US.us" tvg-logo="https://github.com/tv-logo/tv-logos/blob/main/countries/united-states/court-tv-us.png?raw=true" tvg-name="COURT TV",COURT TV
https://fl1.moveonjoy.com/COURT_TV/index.m3u8

#EXTINF:-1 group-title="Entertainment" tvg-id="Cozi.TV.us" tvg-logo="https://github.com/tv-logo/tv-logos/blob/main/countries/united-states/cozi-tv-us.png?raw=true" tvg-name="COZI TV",COZI TV
https://fl1.moveonjoy.com/COZI_TV/index.m3u8

#EXTINF:-1 group-title="Movies" tvg-id="Crave1.-.East.ca" tvg-logo="https://raw.githubusercontent.com/tv-logo/tv-logos/main/countries/canada/crave-1-ca.png" tvg-name="CRAVE 1",CRAVE 1
https://fl7.moveonjoy.com/CRAVE_1/index.m3u8

#EXTINF:-1 group-title="Movies" tvg-id="Crave2.-.East.ca" tvg-logo="https://raw.githubusercontent.com/tv-logo/tv-logos/main/countries/canada/crave-2-ca.png" tvg-name="CRAVE 2",CRAVE 2
https://fl1.moveonjoy.com/CRAVE_2/index.m3u8

#EXTINF:-1 group-title="Movies" tvg-id="Crave3.-.East.ca" tvg-logo="https://raw.githubusercontent.com/tv-logo/tv-logos/main/countries/canada/crave-3-ca.png" tvg-name="CRAVE 3",CRAVE 3
https://fl7.moveonjoy.com/CRAVE_3/index.m3u8

#EXTINF:-1 group-title="Movies" tvg-id="Crave4.ca" tvg-logo="https://raw.githubusercontent.com/tv-logo/tv-logos/main/countries/canada/crave-4-ca.png" tvg-name="CRAVE 4",CRAVE 4
https://fl1.moveonjoy.com/CRAVE_4/index.m3u8

#EXTINF:-1 group-title="Documentary" tvg-id="Crime.+.Investigation.Canada.ca" tvg-logo="https://github.com/tv-logo/tv-logos/blob/main/countries/united-states/crime-and-investigation-us.png?raw=true" tvg-name="Crime + Investigation",Crime + Investigation
https://fl41.moveonjoy.com/Crime_and_Investigation_Network/index.m3u8

#EXTINF:-1 group-title="Documentary" tvg-id="Curiosity.Channel(Stream).us" tvg-logo="https://i.imgur.com/vRO4e5W.png" tvg-name="Curiosity Stream",Curiosity Stream
https://fl41.moveonjoy.com/Curiosity_Stream/index.m3u8

#EXTINF:-1 group-title="Entertainment" tvg-id="WGN CW" tvg-logo="https://raw.githubusercontent.com/tv-logo/tv-logos/refs/heads/main/countries/united-states/wgn-america-us.png" tvg-name="CW",CW
https://fl7.moveonjoy.com/WGN/index.m3u8

#EXTINF:-1 group-title="Documentary" tvg-id="Destination.America.us" tvg-logo="https://github.com/tv-logo/tv-logos/blob/main/countries/united-states/destination-america-us.png?raw=true" tvg-name="Destination America",Destination America
https://fl41.moveonjoy.com/Destination_America/index.m3u8

#EXTINF:-1 group-title="Documentary" tvg-id="Discovery.Channel.(US).-.Eastern.Feed.us" tvg-logo="https://raw.githubusercontent.com/tv-logo/tv-logos/main/countries/united-states/discovery-channel-us.png" tvg-name="Discovery Channel",Discovery Channel
https://fl1.moveonjoy.com/Discovery_Channel/index.m3u8

#EXTINF:-1 group-title="Kids" tvg-id="Discovery.Family.Channel.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.dualstack.us-east-1.amazonaws.com/stationLogos/s16618_dark_360w_270h.png" tvg-name="DISCOVERY FAMILY CHANNEL",DISCOVERY FAMILY CHANNEL
https://fl31.moveonjoy.com/DISCOVERY_FAMILY_CHANNEL/index.m3u8

#EXTINF:-1 group-title="Documentary" tvg-id="Discovery.Life.Channel.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.dualstack.us-east-1.amazonaws.com/stationLogos/s16125_dark_360w_270h.png" tvg-name="DISCOVERY LIFE",DISCOVERY LIFE
https://fl31.moveonjoy.com/DISCOVERY_LIFE/index.m3u8

#EXTINF:-1 group-title="Documentary" tvg-id="Science.us" tvg-logo="https://github.com/tv-logo/tv-logos/blob/main/countries/united-states/discovery-science-us.png?raw=true" tvg-name="Discovery Science",Discovery Science
https://fl41.moveonjoy.com/Discovery_Science/index.m3u8

#EXTINF:-1 group-title="Kids" tvg-id="Disney.-.Eastern.Feed.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.dualstack.us-east-1.amazonaws.com/stationLogos/s10171_dark_360w_270h.png" tvg-name="DISNEY CHANNEL",DISNEY CHANNEL
https://fl31.moveonjoy.com/DISNEY/index.m3u8

#EXTINF:-1 group-title="Kids" tvg-id="Disney.Junior.USA.-.East.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.dualstack.us-east-1.amazonaws.com/stationLogos/s74796_dark_360w_270h.png" tvg-name="DISNEY JR",DISNEY JR
https://fl1.moveonjoy.com/DISNEY_JR/index.m3u8

#EXTINF:-1 group-title="Kids" tvg-id="Disney.XD.USA.-.Eastern.Feed.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.dualstack.us-east-1.amazonaws.com/stationLogos/s18279_dark_360w_270h.png" tvg-name="DISNEY XD",DISNEY XD
https://fl7.moveonjoy.com/DISNEY_XD/index.m3u8

#EXTINF:-1 group-title="Documentary" tvg-id="Magnolia.-.East.us" tvg-logo="https://raw.githubusercontent.com/tv-logo/tv-logos/main/countries/canada/diy-network-ca.png" tvg-name="DIY",DIY
https://fl1.moveonjoy.com/DIY/index.m3u8

#EXTINF:-1 group-title="Entertainment" tvg-id="E!.Entertainment.USA.-.Eastern.Feed.us" tvg-logo="https://github.com/tv-logo/tv-logos/blob/main/countries/united-states/e-entertainment-us.png?raw=true" tvg-name="E ENTERTAINMENT TELEVISION",E ENTERTAINMENT TELEVISION
https://fl1.moveonjoy.com/E_ENTERTAINMENT_TELEVISION/index.m3u8

#EXTINF:-1 group-title="Entertainment" tvg-id="Food.Network.USA.-.Eastern.Feed.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.dualstack.us-east-1.amazonaws.com/stationLogos/s12574_dark_360w_270h.png" tvg-name="FOOD NETWORK",FOOD NETWORK
https://fl31.moveonjoy.com/FOOD_NETWORK/index.m3u8

#EXTINF:-1 group-title="News" tvg-id="FOX New York" tvg-logo="https://raw.githubusercontent.com/tv-logo/tv-logos/main/countries/united-states/us-local/fox-5-wnyw-us.png" tvg-name="FOX (WNYW)",FOX (WNYW)
https://fl1.moveonjoy.com/FOX/index.m3u8

#EXTINF:-1 group-title="News" tvg-id="Fox.Business.us" tvg-logo="https://github.com/tv-logo/tv-logos/blob/main/countries/united-states/fox-business-us.png?raw=true" tvg-name="FOX Business Network",FOX Business Network
https://fl31.moveonjoy.com/FOX_Business_Network/index.m3u8

#EXTINF:-1 group-title="Entertainment" tvg-id="plex.tv.FOX.SOUL.plex" tvg-logo="https://github.com/tv-logo/tv-logos/blob/main/countries/united-states/fox-soul-us.png?raw=true" tvg-name="FOX SOUL",FOX SOUL
https://fl7.moveonjoy.com/FOX_SOUL/index.m3u8

#EXTINF:-1 group-title="Entertainment" tvg-id="Freeform.-.East.Feed.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.dualstack.us-east-1.amazonaws.com/stationLogos/s10093_dark_360w_270h.png" tvg-name="Freeform",Freeform
https://fl7.moveonjoy.com/FREE_FORM/index.m3u8

#EXTINF:-1 group-title="Entertainment" tvg-id="FUSE.TV.-.Eastern.feed.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.amazonaws.com/stationLogos/s14929_dark_360w_270h.png" tvg-name="Fuse",Fuse
https://fl31.moveonjoy.com/FUSE/index.m3u8

#EXTINF:-1 group-title="Entertainment" tvg-id="FX.Networks.East.Coast.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.dualstack.us-east-1.amazonaws.com/stationLogos/s14321_dark_360w_270h.png" tvg-name="FX",FX
https://fl1.moveonjoy.com/FX/index.m3u8

#EXTINF:-1 group-title="Movies" tvg-id="FX.Movie.Channel.us" tvg-logo="https://github.com/tv-logo/tv-logos/blob/main/countries/united-states/fxm-movie-channel-us.png?raw=true" tvg-name="FXM",FXM
https://fl25.moveonjoy.com/FX_MOVIE/index.m3u8

#EXTINF:-1 group-title="Entertainment" tvg-id="FXX.USA.-.Eastern.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.dualstack.us-east-1.amazonaws.com/stationLogos/s17927_dark_360w_270h.png" tvg-name="FXX",FXX
https://fl1.moveonjoy.com/FXX/index.m3u8

#EXTINF:-1 group-title="Entertainment" tvg-id="FYI.USA.-.Eastern.us" tvg-logo="https://github.com/tv-logo/tv-logos/blob/main/countries/united-states/fyi-us.png?raw=true" tvg-name="FYI FHD",FYI FHD
https://fl31.moveonjoy.com/FYI/index.m3u8

#EXTINF:-1 group-title="Entertainment" tvg-id="Game.Show.Network.-.East.us" tvg-logo="https://github.com/tv-logo/tv-logos/blob/main/countries/united-states/game-show-network-hz-us.png?raw=true" tvg-name="GAME SHOW NETWORK",GAME SHOW NETWORK
https://fl41.moveonjoy.com/GAME_SHOW_NETWORK/index.m3u8

#EXTINF:-1 group-title="Entertainment" tvg-id="Get.TV.us" tvg-logo="https://github.com/tv-logo/tv-logos/blob/main/countries/united-states/get-tv-us.png?raw=true" tvg-name="getTV",getTV
https://fl31.moveonjoy.com/GET_TV/index.m3u8

#EXTINF:-1 group-title="Entertainment" tvg-id="Grit.TV.us" tvg-logo="https://github.com/tv-logo/tv-logos/blob/main/countries/united-states/grit-us.png?raw=true" tvg-name="GRIT TV",GRIT TV
https://fl31.moveonjoy.com/GRIT_TV/index.m3u8

#EXTINF:-1 group-title="Movies" tvg-id="Hallmark.-.Eastern.Feed.us" tvg-logo="https://raw.githubusercontent.com/tv-logo/tv-logos/main/countries/united-states/hallmark-channel-us.png" tvg-name="Hallmark Channel",Hallmark Channel
https://fl61.moveonjoy.com/HALLMARK_CHANNEL/index.m3u8

#EXTINF:-1 group-title="Movies" tvg-id="Hallmark.Drama.HDTV.(HALDRHD).us" tvg-logo="https://github.com/tv-logo/tv-logos/blob/main/countries/united-states/hallmark-family-us.png?raw=true" tvg-name="Hallmark Family",Hallmark Family
https://fl61.moveonjoy.com/HALLMARK_DRAMA/index.m3u8

#EXTINF:-1 group-title="Movies" tvg-id="Hallmark.Mystery.Eastern.-.HD.us" tvg-logo="https://github.com/tv-logo/tv-logos/blob/main/countries/united-states/hallmark-mystery-us.png?raw=true" tvg-name="Hallmark Mystery",Hallmark Mystery
https://fl61.moveonjoy.com/HALLMARK_MOVIES_MYSTERIES/index.m3u8

#EXTINF:-1 group-title="Movies" tvg-id="HBO.-.Eastern.Feed.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.dualstack.us-east-1.amazonaws.com/stationLogos/s10240_dark_360w_270h.png" tvg-name="HBO",HBO
https://fl61.moveonjoy.com/HBO/index.m3u8

#EXTINF:-1 group-title="Movies" tvg-id="HBO.Comedy.HD.-.East.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.dualstack.us-east-1.amazonaws.com/stationLogos/s18429_dark_360w_270h.png" tvg-name="HBO Comedy",HBO Comedy
https://fl41.moveonjoy.com/HBO_COMEDY/index.m3u8

#EXTINF:-1 group-title="Movies" tvg-id="HBO.Family.-.Eastern.Feed.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.dualstack.us-east-1.amazonaws.com/stationLogos/s16585_dark_360w_270h.png" tvg-name="HBO Family",HBO Family
https://fl41.moveonjoy.com/HBO_FAMILY/index.m3u8

#EXTINF:-1 group-title="Movies" tvg-id="HBO.Zone.HD.-.East.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.dualstack.us-east-1.amazonaws.com/stationLogos/s18431_dark_360w_270h.png" tvg-name="HBO Zone",HBO Zone
https://fl41.moveonjoy.com/HBO_ZONE/index.m3u8

#EXTINF:-1 group-title="Movies" tvg-id="HBO.2.-.Eastern.Feed.us" tvg-logo="https://schedulesdirect-api20141201-logos.s3.dualstack.us-east-1.amazonaws.com/stationLogos/s68140_dark_360w_270h.png" tvg-name="HBO2",HBO2
https://fl41.moveonjoy.com/HBO_2/index.m3u8
    `;

    const db = [];
    m3uRaw.split('#EXTINF').slice(1).forEach(block => {
        const lines = block.split('\n');
        const meta = lines[0];
        const url = lines.find(l => l.trim().startsWith('http'));
        db.push({
            name: meta.split(',')[1] || 'Unknown',
            logo: meta.match(/tvg-logo="([^"]+)"/)?.[1] || '',
            url: url ? url.trim() : ''
        });
    });

    let hls = null;
    let currentIdx = 0;
    const player = document.getElementById('player');

    // LOW-LATENCY LIVE ENGINE
    function loadChannel(idx) {
        currentIdx = idx;
        const ch = db[idx];
        
        document.getElementById('hud-logo').src = ch.logo;
        document.getElementById('hud-title').innerText = ch.name;
        renderList();

        if (hls) hls.destroy();

        // Optimized HLS Config for Live Streams
        const hlsConfig = {
            enableWorker: true,
            lowLatencyMode: true,
            backBufferLength: 90,
            liveSyncDurationCount: 2, // Tighter live sync for immediate start
            maxBufferLength: 30,
            liveMaxLatencyDurationCount: 5
        };

        if (Hls.isSupported()) {
            hls = new Hls(hlsConfig);
            hls.loadSource(ch.url);
            hls.attachMedia(player);
            hls.on(Hls.Events.MANIFEST_PARSED, () => {
                // FIXED: Direct play request with auto-unmute logic
                player.muted = false;
                const playPromise = player.play();
                
                if (playPromise !== undefined) {
                    playPromise.catch(error => {
                        console.log("Browser blocked auto-unmute, starting muted to ensure zero-pause.");
                        player.muted = true;
                        player.play();
                    });
                }
            });

            // FIXED: Prevent auto-pause on buffering/stall
            hls.on(Hls.Events.ERROR, (event, data) => {
                if (data.fatal) {
                    switch (data.type) {
                        case Hls.ErrorTypes.NETWORK_ERROR: hls.startLoad(); break;
                        case Hls.ErrorTypes.MEDIA_ERROR: hls.recoverMediaError(); break;
                        default: loadChannel(currentIdx); break;
                    }
                }
            });
        } else if (player.canPlayType('application/vnd.apple.mpegurl')) {
            player.src = ch.url;
            player.addEventListener('loadedmetadata', () => {
                player.muted = false;
                player.play();
            });
        }
    }

    // Initialize with First Channel
    window.addEventListener('DOMContentLoaded', () => {
        renderList();
        loadChannel(0);
        
        // Mobile "Unlock" Listener
        document.addEventListener('click', () => {
            if (player.muted) {
                player.muted = false;
            }
        }, { once: true });
    });

    function renderList() {
        const list = document.getElementById('channel-list');
        list.innerHTML = db.map((ch, i) => `
            <div class="ch-card ${i === currentIdx ? 'active' : ''}" onclick="loadChannel(${i})">
                <img class="ch-logo" src="${ch.logo}">
                <div class="ch-name">${ch.name}</div>
            </div>
        `).join('');
    }

    function shuffle() { loadChannel(Math.floor(Math.random() * db.length)); }
    
    function openSync() {
        const qrBox = document.getElementById('qr-box');
        qrBox.innerHTML = "";
        new QRCode(qrBox, { text: window.location.href, width: 160, height: 160 });
        document.getElementById('sync-modal').style.display = 'flex';
    }

    async function triggerNativeShare() {
        if (navigator.share) await navigator.share({ title: 'Humble CableTv', url: window.location.href });
    }

    function toggleMenu() { document.body.classList.toggle('menu-open'); }
    function closeModals() { document.querySelectorAll('.modal').forEach(m => m.style.display = 'none'); }
    
    function filterChannels() {
        const q = document.getElementById('search').value.toLowerCase();
        const cards = document.querySelectorAll('.ch-card');
        cards.forEach((card, i) => {
            const match = db[i].name.toLowerCase().includes(q);
            card.style.display = match ? 'flex' : 'none';
        });
    }
</script>

</body>
</html>
